# Disable DevTools restart and defaults in docs profile to avoid CI classloader issues
spring.devtools.restart.enabled=false
spring.devtools.add-properties=false

# Ensure lazy initialization is disabled to avoid early method introspection under docs profile
spring.main.lazy-initialization=false

# ===================== Docs profile: in-memory H2 database =====================
# Override default Postgres settings from application.properties
spring.datasource.url=jdbc:h2:mem:docs;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE;MODE=PostgreSQL;DATABASE_TO_UPPER=false;CASE_INSENSITIVE_IDENTIFIERS=true
spring.datasource.driver-class-name=org.h2.Driver
spring.datasource.username=sa
spring.datasource.password=

# Use H2 dialect for Hibernate under docs profile
spring.jpa.database-platform=org.hibernate.dialect.H2Dialect
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=false

# No SQL initialization/scripts during docs run
spring.sql.init.mode=never

# Avoid starting H2 console in CI
spring.h2.console.enabled=false

# Expose API on a configurable port (CI passes --server.port)
server.port=${SERVER_PORT:18080}
