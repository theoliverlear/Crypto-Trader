server:
  port: 8080

spring:
  application:
    name: crypto-trader-api
  web:
    resources:
      cache:
        cachecontrol:
          max-age: 0s
  thymeleaf:
    cache: false
  freemarker:
    cache: false
  datasource:
    url: ${PSQL_DB_URL}
    username: ${PSQL_USER}
    password: ${PSQL_PW}
    generate-unique-name: false
    driver-class-name: org.postgresql.Driver
  jpa:
    database-platform: org.hibernate.dialect.PostgreSQLDialect
    show-sql: false
    hibernate:
      ddl-auto: update
      naming:
        implicit-strategy: org.hibernate.boot.model.naming.ImplicitNamingStrategyLegacyJpaImpl
        physical-strategy: org.hibernate.boot.model.naming.PhysicalNamingStrategyStandardImpl
  cloud:
    function:
      sanitization:
        enabled: false
      definition: consoleRepliesConsumer
    stream:
      function:
        sanitizing:
          enabled: false
      defaultBinder: kafka
      bindings:
        userRegistered-out-0:
          destination: ct.user.registered.v1
          contentType: application/json

        consoleRequests-out-0:
          destination: ct.console.requests
          contentType: application/json

        consoleRepliesConsumer-in-0:
          destination: ct.console.replies
          group: crypto-trader-api-console-replies
          contentType: application/json

        contactCreated-in-0:
          destination: ct.contact.created.v1
          contentType: application/json
        orderFilled-in-0:
          destination: ct.order.filled.v1
          contentType: application/json

      kafka:
        binder:
          brokers: localhost:9092
        bindings:
          contactCreated-in-0:
            consumer:
              enableDlq: true
              dlqName: ct.contact.created.v1.DLT
          orderFilled-in-0:
            consumer:
              enableDlq: true
              dlqName: ct.order.filled.v1.DLT
  function:
    sanitizing:
      enabled: false

logging:
  level:
    org.springframework: INFO
    org.springframework.web: INFO
    org.springframework.web.filter.CommonsRequestLoggingFilter: DEBUG

management:
  endpoints:
    web:
      exposure:
        include: health,info

security:
  jwt:
    secret: ${JWT_SECRET}
    issuer: "http://localhost:8080"
    expiration: 360000
  auth:
    dpop:
      allowed-algs: "ES256"
      replay-ttl-seconds: 120
  honeypot:
    paths: ${SECURITY_HONEYPOT_PATHS:}
  refresh:
    cookie-name: rt
    cookie-samesite: Strict
    cookie-secure: false
    allow-rebind-once: true
cryptotrader:
  api:
    jpa:
      enabled: true
    websocket:
      enabled: true
  load:
    aead: true
  cors:
    allowed-origins: "http://localhost:4200"
    allowed-headers: "authorization,dpop,content-type"